<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/croppie/croppie.js"></script>
    <script src="avatar.js"></script>


    <link rel="stylesheet" href="node_modules/croppie/croppie.css">
    <style>
        #demo-basic {
            width: 250px;
            height:250px;
            margin:auto;
        }
    </style>
</head>
<body>
        <div id="demo-basic"></div>
        <input type="file" name="" id="get">
        <input type="button" value="result" id="save" />
        <input type="button" value="send to server" id="send" />
        <br><br><br><br>
        <img id="result" src="" alt="">
        <script>

            var avatar = new Avatar();
            avatar.init('#demo-basic');

            $('#get').change(function () {
                avatar.setImage(this.files[0]);
            });
            
            $('#save').click(function () {
                avatar.getCroppedImage('canvas', function(res) {
                    $('#result').attr('src', res);
                });
            });

            $('#send').click(function () {
                avatar.sendToServer('url', function(res) {
                    alert(JSON.stringify(res))
                });
            });
            
        </script>
</body>
</html>